# Shell Config Audit

**Source:** Old laptop's ansible-generated `.zshrc`, `.zshenv`, `.zpreztorc`

The old laptop's shell files were auto-generated by `ansible-role-dotmodules` on 2025-11-06, merging 19 modules.

## Missing from Current Dotfiles

### 1. `.zshenv` — Does not exist in repo
Old laptop had PATH setup and env vars contributed by multiple modules:

| Source Module | Content |
|---------------|---------|
| git | `$HOME/bin` in PATH |
| node | `$HOME/.npm-packages/bin`, `$HOME/.node/bin`, `$HOME/.asdf/shims` in PATH |
| editor | `EDITOR="emacsclient -t"`, `VISUAL="emacsclient -t"` |
| speckit | `$HOME/.local/bin` in PATH |
| (tail) | `. "$HOME/.cargo/env"` (Rust) |

**Action:** Each module that needs `.zshenv` entries should have a `.zshenv` file in its `files/` directory, declared as `mergeable_files`.

### 2. Prezto init line — Missing from zsh module `.zshrc`
The critical line is absent from the current `.zshrc`:
```zsh
if [[ -s "${ZDOTDIR:-$HOME}/.zprezto/init.zsh" ]]; then
  source "${ZDOTDIR:-$HOME}/.zprezto/init.zsh"
fi
```

### 3. Docker aliases — In docker module but not in zsh module
These exist in the old merged file but their source module files need verification:
- `dm`, `dme`, `dms`, `dmh`, `dmr`, `dmk` — docker-machine aliases
- `db`, `dp` — docker build/push
- Docker CLI completions (fpath + compinit)

### 4. Editor/Emacs config — In editor module but not in zsh module
- `em()` function, `e`, `eek`, `en`, `er`, `ec` aliases
- `[[ $EMACS = t ]] && unsetopt zle` guard

### 5. Node/PNPM/ASDF — In node module
- `PNPM_HOME` export
- ASDF integration (`/opt/homebrew/opt/asdf/libexec/asdf.sh`)
- ASDF-direnv integration

### 6. Android NDK
```zsh
export ANDROID_NDK_HOME=$(brew --prefix)/share/android-ndk
```
Corporate context — probably skip.

### 7. Claude alias
```zsh
alias yolo='claude --dangerously-skip-permissions'
```
Should go in claude module.

### 8. OpenClaw completions
```zsh
source "$HOME/.openclaw/completions/openclaw.zsh"
```
Runtime dependency — should be in a tail/openclaw module or conditional.

### 9. Rust/Cargo env
```zsh
. "$HOME/.cargo/env"
```
Should be in a rust module's `.zshenv`.

## Prezto Config Gaps

The git module's `.zpreztorc` sets `git:alias skip 'yes'` but the old laptop had `skip 'no'`. This means Prezto's built-in git aliases (gws, gwd, etc.) were enabled on the old laptop.

## `.tool-versions` (asdf)
Old laptop had a global `~/.tool-versions`:
```
nodejs 25.2.1
jq 1.7.1
```
Not in current dotfiles.
